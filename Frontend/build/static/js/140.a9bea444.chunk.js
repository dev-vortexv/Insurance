"use strict";(self.webpackChunkinsurance=self.webpackChunkinsurance||[]).push([[140],{6140:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var i=n(47313),s=n(47825),a=n(35898),r=n(61113),o=n(9019),c=n(73428),l=n(93405),d=n(57829),u=n(56104),p=n(69099),x=n(19333),h=n(17592),g=n(66149),m=n(33604),y=n(96467),Z=n(4117),f=n(47131),j=n(11198),v=n(46417);const b=(0,h.ZP)(g.Z)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function C(e){const{children:t,onClose:n,...i}=e;return(0,v.jsxs)(m.Z,{sx:{m:0,p:2},...i,children:[t,n?(0,v.jsx)(f.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,v.jsx)(j.Z,{})}):null]})}function S(e){const{openPayment:t,handleClosePayment:n,purchaseData:i,addPayments:s}=e;return(0,v.jsx)("div",{children:(0,v.jsxs)(b,{"aria-labelledby":"customized-dialog-title",open:t,children:[(0,v.jsx)(C,{id:"customized-dialog-title",onClose:n,children:"Subscription Confirmation"}),(0,v.jsx)(y.Z,{dividers:!0,children:(0,v.jsx)(r.Z,{gutterBottom:!0,p:3,children:"Are you sure you want to buy this item?"})}),(0,v.jsx)(Z.Z,{children:(0,v.jsxs)(a.Z,{direction:"row",spacing:2,children:[(0,v.jsx)(p.Z,{variant:"contained",color:"error",onClick:()=>{s(i),n()},children:"Yes"}),(0,v.jsx)(p.Z,{variant:"contained",onClick:n,children:"No"})]})})]})})}var w=n(31387);var k=()=>{const e=localStorage.getItem("user_id"),t=localStorage.getItem("userRole"),[n,h]=(0,i.useState)([]),[g,m]=(0,i.useState)(!1),[y,Z]=(0,i.useState)(""),[f,j]=(0,i.useState)([]),b=async()=>{const n=await(0,x.ac)("admin"===t?"payments/list":`payments/list/?createdBy=${e}`);var i;n&&200===n.status&&j(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.paymentsData)},C=async e=>{Z(e),m(!0)};(0,i.useEffect)((()=>{(async()=>{const n=await(0,x.ac)("admin"===t?"packages/list":`packages/list/?createdBy=${e}`);var i;n&&200===n.status&&h(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.packagesAllData)})(),b()}),[]);const k=e=>f.some((t=>t.subscription_id===e));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(S,{openPayment:g,handleClosePayment:()=>m(!1),purchaseData:y,addPayments:async t=>{const n={subscription_id:t._id,title:t.title,days:t.days,amount:t.amount,description:t.description,createdBy:e};if(f.some((e=>!0===e.active)))w.Am.error("Subscription already purchased");else{const e=await(0,x.Fv)("payments/add",n);e&&201===e.status&&(w.Am.success("Payments Done successfully"),await b())}}}),(0,v.jsxs)(s.Z,{children:[(0,v.jsx)(a.Z,{direction:"row",alignItems:"center",mb:5,justifyContent:"space-between",children:(0,v.jsx)(r.Z,{variant:"h4",children:" Subscription Details Lists"})}),(0,v.jsx)(o.ZP,{container:!0,spacing:5,children:n.map((e=>(0,v.jsx)(o.ZP,{item:!0,md:3,xs:12,children:(0,v.jsxs)(c.Z,{style:{height:"250px",backgroundColor:"#D6E4FF",borderRadius:"10px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[(0,v.jsx)(l.Z,{children:(0,v.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},children:[(0,v.jsx)(r.Z,{sx:{fontSize:20,textAlign:"center",fontWeight:"bold",mb:2},variant:"h5",gutterBottom:!0,children:e.title}),(0,v.jsx)(r.Z,{sx:{textAlign:"center",fontWeight:"bold"},variant:"h4",children:`Rs.${e.amount}/${e.days} Days`}),(0,v.jsx)(d.Z,{sx:{paddingTop:"20px",textAlign:"center"},children:(0,v.jsx)(r.Z,{color:"text.secondary",variant:"body1",gutterBottom:!0,children:e.description})})]})}),(0,v.jsx)(u.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,v.jsx)(p.Z,{size:"large",variant:"contained",color:"primary",onClick:()=>C(e),disabled:k(e._id),children:k(e._id)?"Purchased":"BuyNow"})})]})},e._id)))})]})]})}},11198:function(e,t,n){var i=n(64836);t.Z=void 0;var s=i(n(45045)),a=n(46417),r=(0,s.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.Z=r},56104:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(63366),s=n(87462),a=n(47313),r=n(83061),o=n(21921),c=n(17592),l=n(77342),d=n(77430),u=n(32298);function p(e){return(0,u.Z)("MuiCardActions",e)}(0,d.Z)("MuiCardActions",["root","spacing"]);var x=n(46417);const h=["disableSpacing","className"],g=(0,c.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,s.Z)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})}));var m=a.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:a=!1,className:c}=n,d=(0,i.Z)(n,h),u=(0,s.Z)({},n,{disableSpacing:a}),m=(e=>{const{classes:t,disableSpacing:n}=e,i={root:["root",!n&&"spacing"]};return(0,o.Z)(i,p,t)})(u);return(0,x.jsx)(g,(0,s.Z)({className:(0,r.Z)(m.root,c),ownerState:u,ref:t},d))}))}}]);